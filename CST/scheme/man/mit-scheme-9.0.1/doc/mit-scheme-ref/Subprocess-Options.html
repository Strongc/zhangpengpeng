<html lang="en">
<head>
<title>Subprocess Options - MIT/GNU Scheme 9.0.1</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="MIT/GNU Scheme 9.0.1">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Subprocesses.html#Subprocesses" title="Subprocesses">
<link rel="prev" href="Subprocess-Conditions.html#Subprocess-Conditions" title="Subprocess Conditions">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual documents MIT/GNU Scheme 9.0.1.

Copyright (C) 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993,
    1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,
    2005, 2006, 2007, 2008, 2009, 2010 Massachusetts Institute of
    Technology

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover Texts
     being ``A GNU Manual,'' and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License.''

     (a) The FSF's Back-Cover Text is: ``You have freedom to copy and
     modify this GNU Manual, like GNU software.  Copies published by
     the Free Software Foundation raise funds for GNU development.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Subprocess-Options"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="Subprocess-Conditions.html#Subprocess-Conditions">Subprocess Conditions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Subprocesses.html#Subprocesses">Subprocesses</a>
<hr>
</div>

<h4 class="subsection">15.7.3 Subprocess Options</h4>

<p>The following subprocess options may be passed to
<code>run-shell-command</code> or <code>run-synchronous-subprocess</code>.  These
options are passed as alternating keyword/value pairs, for example:

<pre class="example">     (run-shell-command "ls /"
                        'output my-output-port
                        'output-buffer-size 8192)
</pre>
   <p class="noindent">The example shows a shell command being run with two options specified:
<code>output</code> and <code>output-buffer-size</code>.

<div class="defun">
&mdash; subprocess option: <b>input</b><var> port<a name="index-input-2723"></a></var><br>
<blockquote><p>Specifies the standard input of the subprocess.  <var>Port</var> may be an
input port, in which case characters are read from <var>port</var> and fed to
the subprocess until <var>port</var> reaches end-of-file.  Alternatively,
<var>port</var> may be <code>#f</code>, indicating that the subprocess has no
standard input.

        <p>The default value of this option is <code>#f</code>.

     <pre class="example">          (call-with-input-file "foo.in"
            (lambda (port)
              (run-shell-command "cat &gt; /dev/null" 'input port)))
</pre>
        </blockquote></div>

<div class="defun">
&mdash; subprocess option: <b>input-line-translation</b><var> line-ending<a name="index-input_002dline_002dtranslation-2724"></a></var><br>
<blockquote><p>Specifies how line-endings should be translated when writing characters
to the subprocess.  Ignored if the <code>input</code> option is <code>#f</code>. 
<var>Line-ending</var> must be either a string specifying the line ending, or
the symbol <code>default</code>, meaning to use the operating system's
standard line ending.  In either case, newline characters to be written
to the <code>input</code> port are translated to the specified line ending
before being written.

        <p>The default value of this option is <code>default</code>.

     <pre class="example">          (call-with-input-file "foo.in"
            (lambda (port)
              (run-shell-command "cat &gt; /dev/null"
                                 'input port
                                 'input-line-translation "\r\n")))
</pre>
        </blockquote></div>

<div class="defun">
&mdash; subprocess option: <b>input-buffer-size</b><var> n<a name="index-input_002dbuffer_002dsize-2725"></a></var><br>
<blockquote><p>Specifies the size of the input buffer for the standard input of the
subprocess.  (This is the buffer on the Scheme side, and has nothing to
do with any buffering done on the subprocess side.)  Ignored if the
<code>input</code> option is <code>#f</code>.  <var>N</var> must be an exact positive
integer specifying the number of characters the buffer can hold.

        <p>The default value of this option is <code>512</code>.

     <pre class="example">          (call-with-input-file "foo.in"
            (lambda (port)
              (run-shell-command "cat &gt; /dev/null"
                                 'input port
                                 'input-buffer-size 4096)))
</pre>
        </blockquote></div>

<div class="defun">
&mdash; subprocess option: <b>output</b><var> port<a name="index-output-2726"></a></var><br>
<blockquote><p>Specifies the standard output and standard error of the subprocess. 
<var>Port</var> may be an output port, in which case characters are read from
the subprocess and fed to <var>port</var> until the subprocess finishes. 
Alternatively, <var>port</var> may be <code>#f</code>, indicating that the
subprocess has no standard output or standard error.

        <p>The default value of this option is the value of
<code>(current-output-port)</code>.

     <pre class="example">          (call-with-output-file "foo.out"
            (lambda (port)
              (run-shell-command "ls -la /etc" 'output port)))
</pre>
        </blockquote></div>

<div class="defun">
&mdash; subprocess option: <b>output-line-translation</b><var> line-ending<a name="index-output_002dline_002dtranslation-2727"></a></var><br>
<blockquote><p>Specifies how line-endings should be translated when reading characters
from the standard output of the subprocess.  Ignored if the
<code>output</code> option is <code>#f</code>.  <var>Line-ending</var> must be either a
string specifying the line ending, or the symbol <code>default</code>, meaning
to use the operating system's standard line ending.  In either case,
newline characters read from the subprocess port are translated to the
specified line ending.

        <p>The default value of this option is <code>default</code>.

     <pre class="example">          (call-with-output-file "foo.out"
            (lambda (port)
              (run-shell-command "ls -la /etc"
                                 'output port
                                 'output-line-translation "\r\n")))
</pre>
        </blockquote></div>

<div class="defun">
&mdash; subprocess option: <b>output-buffer-size</b><var> n<a name="index-output_002dbuffer_002dsize-2728"></a></var><br>
<blockquote><p>Specifies the size of the output buffer for the standard output of the
subprocess.  (This is the buffer on the Scheme side, and has nothing to
do with any buffering done on the subprocess side.)  Ignored if the
<code>output</code> option is <code>#f</code>.  <var>N</var> must be an exact positive
integer specifying the number of characters the buffer can hold.

        <p>The default value of this option is <code>512</code>.

     <pre class="example">          (call-with-output-file "foo.out"
            (lambda (port)
              (run-shell-command "ls -la /etc"
                                 'output port
                                 'output-buffer-size 4096)))
</pre>
        </blockquote></div>

<div class="defun">
&mdash; subprocess option: <b>redisplay-hook</b><var> thunk<a name="index-redisplay_002dhook-2729"></a></var><br>
<blockquote><p>Specifies that <var>thunk</var> is to be run periodically when output from
the subprocess is available.  <var>Thunk</var> must be a procedure of no
arguments, or <code>#f</code> indicating that no hook is supplied.  This
option is mostly useful for interactive systems.  For example, the Edwin
text editor uses this to update output buffers when running some
subprocesses.

        <p>The default value of this option is <code>#f</code>.

     <pre class="example">          (run-shell-command "ls -la /etc"
                             'redisplay-hook
                             (lambda ()
                               (update-buffer-contents buffer)))
</pre>
        </blockquote></div>

<div class="defun">
&mdash; subprocess option: <b>environment</b><var> environment<a name="index-environment-2730"></a></var><br>
<blockquote><p>Specifies the environment variables that are to be used for the
subprocess.  <var>Environment</var> must be either a vector of strings or
<code>#f</code> indicating the default environment.  If it is a vector of
strings, each string must be a name/value pair where the name and value
are separated by an equal sign, for example, <code>"foo=bar"</code>.  To
define a variable with no value, just omit the value, as in <code>"foo="</code>.

        <p><a name="index-scheme_002dsubprocess_002denvironment-2731"></a>Note that the variable <code>scheme-subprocess-environment</code> is bound to
the default subprocess environment.

        <p>The default value of this option is <code>#f</code>.

     <pre class="example">          (run-shell-command "ls -la /etc"
                             'environment
                             (let* ((v scheme-subprocess-environment)
                                    (n (vector-length v))
                                    (v (vector-grow v (+ n 1))))
                               (vector-set! v n "TERM=none")
                               v))
</pre>
        </blockquote></div>

<div class="defun">
&mdash; subprocess option: <b>working-directory</b><var> pathname<a name="index-working_002ddirectory-2732"></a></var><br>
<blockquote><p>Specifies the working directory in which the subprocess will run.

        <p>The default value of this option is <code>(working-directory-pathname)</code>.

     <pre class="example">          (run-shell-command "ls -la" 'working-directory "/etc/")
</pre>
        </blockquote></div>

<div class="defun">
&mdash; subprocess option: <b>use-pty?</b><var> boolean<a name="index-use_002dpty_003f-2733"></a></var><br>
<blockquote><p>This option is meaningful only on unix systems; on other systems it is
ignored.  Specifies whether to communicate with the subprocess using
<span class="sc">pty</span> devices; if true, <span class="sc">pty</span>s will be used, otherwise pipes will
be used.

        <p>The default value of this option is <code>#f</code>.

     <pre class="example">          (run-shell-command "ls -la /etc" 'use-pty? #t)
</pre>
        </blockquote></div>

<div class="defun">
&mdash; subprocess option: <b>shell-file-name</b><var> pathname<a name="index-shell_002dfile_002dname-2734"></a></var><br>
<blockquote><p>Specifies the shell program to use for <code>run-shell-command</code>.

        <p>The default value of this option is <code>(os/shell-file-name)</code>.  This
is the value of the environment variable <code>SHELL</code>, or if
<code>SHELL</code> is not set, the value is operating-system dependent as
follows:

          <ul>
<li>On unix systems, <samp><span class="file">/bin/sh</span></samp> is used.

          <li>On Windows systems, the value of the environment variable <code>COMSPEC</code>
is used.  If that is not set, <samp><span class="file">cmd.exe</span></samp> is used for Windows NT, or
<samp><span class="file">command.com</span></samp> is used for Windows 9x; in each case the shell is
found by searching the path. 
</ul>

     <pre class="example">          (run-shell-command "ls -la /etc"
                             'shell-file-name "/usr/local/bin/bash")
</pre>
        </blockquote></div>

   </body></html>

