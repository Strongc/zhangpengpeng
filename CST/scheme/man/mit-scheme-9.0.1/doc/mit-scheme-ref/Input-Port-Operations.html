<html lang="en">
<head>
<title>Input Port Operations - MIT/GNU Scheme 9.0.1</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="MIT/GNU Scheme 9.0.1">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Port-Primitives.html#Port-Primitives" title="Port Primitives">
<link rel="prev" href="Constructors-and-Accessors-for-Ports.html#Constructors-and-Accessors-for-Ports" title="Constructors and Accessors for Ports">
<link rel="next" href="Output-Port-Operations.html#Output-Port-Operations" title="Output Port Operations">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual documents MIT/GNU Scheme 9.0.1.

Copyright (C) 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993,
    1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,
    2005, 2006, 2007, 2008, 2009, 2010 Massachusetts Institute of
    Technology

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover Texts
     being ``A GNU Manual,'' and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License.''

     (a) The FSF's Back-Cover Text is: ``You have freedom to copy and
     modify this GNU Manual, like GNU software.  Copies published by
     the Free Software Foundation raise funds for GNU development.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Input-Port-Operations"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Output-Port-Operations.html#Output-Port-Operations">Output Port Operations</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Constructors-and-Accessors-for-Ports.html#Constructors-and-Accessors-for-Ports">Constructors and Accessors for Ports</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Port-Primitives.html#Port-Primitives">Port Primitives</a>
<hr>
</div>

<h4 class="subsection">14.9.3 Input Port Operations</h4>

<p><a name="index-input-port-operations-2170"></a>
This section describes the standard operations on input ports. 
Following that, some useful custom operations are described.

<div class="defun">
&mdash; operation on input port: <b>read-char</b><var> input-port<a name="index-read_002dchar-on-input-port-2171"></a></var><br>
<blockquote><p><a name="index-character_002c-input-from-port-2172"></a>Removes the next character available from <var>input-port</var> and returns
it.  If <var>input-port</var> has no more characters and will never have any
(e.g. at the end of an input file), this operation returns an
end-of-file object.  If <var>input-port</var> has no more characters but will
eventually have some more (e.g. a terminal where nothing has been
typed recently), and it is in non-blocking mode, <code>#f</code> is returned;
otherwise the operation hangs until input is available. 
</p></blockquote></div>

<div class="defun">
&mdash; operation on input port: <b>peek-char</b><var> input-port<a name="index-peek_002dchar-on-input-port-2173"></a></var><br>
<blockquote><p>Reads the next character available from <var>input-port</var> and returns it. 
The character is <em>not</em> removed from <var>input-port</var>, and a
subsequent attempt to read from the port will get that character again. 
In other respects this operation behaves like <code>read-char</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; operation on input port: <b>char-ready?</b><var> input-port k<a name="index-char_002dready_003f-on-input-port-2174"></a></var><br>
<blockquote><p><code>char-ready?</code> returns <code>#t</code> if at least one character is
available to be read from <var>input-port</var>.  If no characters are
available, the operation waits up to <var>k</var> milliseconds before
returning <code>#f</code>, returning immediately if any characters become
available while it is waiting. 
</p></blockquote></div>

<div class="defun">
&mdash; operation on input port: <b>read-string</b><var> input-port char-set<a name="index-read_002dstring-on-input-port-2175"></a></var><br>
&mdash; operation on input port: <b>discard-chars</b><var> input-port char-set<a name="index-discard_002dchars-on-input-port-2176"></a></var><br>
<blockquote><p><a name="index-string_002c-input-from-port-2177"></a>These operations are like <code>read-char</code>, except that they read or
discard multiple characters at once.  All characters up to, but
excluding, the first character in <var>char-set</var> (or end of file) are
read from <var>input-port</var>.  <code>read-string</code> returns these characters
as a newly allocated string, while <code>discard-chars</code> discards them
and returns an unspecified value.  These operations hang until
sufficient input is available, even if <var>input-port</var> is in
non-blocking mode.  If end of file is encountered before any input
characters, <code>read-string</code> returns an end-of-file object. 
</p></blockquote></div>

<div class="defun">
&mdash; operation on input port: <b>read-substring</b><var> input-port string start end<a name="index-read_002dsubstring-on-input-port-2178"></a></var><br>
<blockquote><p>Reads characters from <var>input-port</var> into the substring defined by
<var>string</var>, <var>start</var>, and <var>end</var> until either the substring has
been filled or there are no more characters available.  Returns the
number of characters written to the substring.

        <p>If <var>input-port</var> is an interactive port, and at least one character
is immediately available, the available characters are written to the
substring and this operation returns immediately.  If no characters are
available, and <var>input-port</var> is in blocking mode, the operation
blocks until at least one character is available.  Otherwise, the
operation returns <code>#f</code> immediately.

        <p>This is an extremely fast way to read characters from a port. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>input-port/read-char</b><var> input-port<a name="index-input_002dport_002fread_002dchar-2179"></a></var><br>
&mdash; procedure: <b>input-port/peek-char</b><var> input-port<a name="index-input_002dport_002fpeek_002dchar-2180"></a></var><br>
&mdash; procedure: <b>input-port/char-ready?</b><var> input-port k<a name="index-input_002dport_002fchar_002dready_003f-2181"></a></var><br>
&mdash; procedure: <b>input-port/read-string</b><var> input-port char-set<a name="index-input_002dport_002fread_002dstring-2182"></a></var><br>
&mdash; procedure: <b>input-port/discard-chars</b><var> input-port char-set<a name="index-input_002dport_002fdiscard_002dchars-2183"></a></var><br>
&mdash; procedure: <b>input-port/read-substring</b><var> input-port string start end<a name="index-input_002dport_002fread_002dsubstring-2184"></a></var><br>
<blockquote><p>Each of these procedures invokes the respective operation on
<var>input-port</var>.  For example, the following are equivalent:

     <pre class="example">          (input-port/read-char <var>input-port</var>)
          ((port/operation <var>input-port</var> 'read-char) <var>input-port</var>)
</pre>
        </blockquote></div>

   <p>The following custom operations are implemented for input ports to
files, and will also work with some other kinds of input ports:

<div class="defun">
&mdash; operation on input port: <b>eof?</b><var> input-port<a name="index-eof_003f-on-input-port-2185"></a></var><br>
<blockquote><p>Returns <code>#t</code> if <var>input-port</var> is known to be at end of file,
otherwise it returns <code>#f</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; operation on input port: <b>chars-remaining</b><var> input-port<a name="index-chars_002dremaining-on-input-port-2186"></a></var><br>
<blockquote><p>Returns an estimate of the number of characters remaining to be read
from <var>input-port</var>.  This is useful only when <var>input-port</var> is a
file port in binary mode; in other cases, it returns <code>#f</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; operation on input port: <b>buffered-input-chars</b><var> input-port<a name="index-buffered_002dinput_002dchars-on-input-port-2187"></a></var><br>
<blockquote><p>Returns the number of unread characters that are stored in
<var>input-port</var>'s buffer.  This will always be less than or equal to
the buffer's size. 
</p></blockquote></div>

<div class="defun">
&mdash; operation on input port: <b>input-buffer-size</b><var> input-port<a name="index-input_002dbuffer_002dsize-on-input-port-2188"></a></var><br>
<blockquote><p>Returns the maximum number of characters that <var>input-port</var>'s buffer
can hold. 
</p></blockquote></div>

<div class="defun">
&mdash; operation on input port: <b>set-input-buffer-size</b><var> input-port size<a name="index-set_002dinput_002dbuffer_002dsize-on-input-port-2189"></a></var><br>
<blockquote><p>Resizes <var>input-port</var>'s buffer so that it can hold at most <var>size</var>
characters.  Characters in the buffer are discarded.  <var>Size</var> must be
an exact non-negative integer. 
</p></blockquote></div>

   </body></html>

