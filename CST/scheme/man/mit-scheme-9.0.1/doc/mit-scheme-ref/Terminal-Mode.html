<html lang="en">
<head>
<title>Terminal Mode - MIT/GNU Scheme 9.0.1</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="MIT/GNU Scheme 9.0.1">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Port-Primitives.html#Port-Primitives" title="Port Primitives">
<link rel="prev" href="Blocking-Mode.html#Blocking-Mode" title="Blocking Mode">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual documents MIT/GNU Scheme 9.0.1.

Copyright (C) 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993,
    1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,
    2005, 2006, 2007, 2008, 2009, 2010 Massachusetts Institute of
    Technology

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover Texts
     being ``A GNU Manual,'' and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License.''

     (a) The FSF's Back-Cover Text is: ``You have freedom to copy and
     modify this GNU Manual, like GNU software.  Copies published by
     the Free Software Foundation raise funds for GNU development.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Terminal-Mode"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="Blocking-Mode.html#Blocking-Mode">Blocking Mode</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Port-Primitives.html#Port-Primitives">Port Primitives</a>
<hr>
</div>

<h4 class="subsection">14.9.6 Terminal Mode</h4>

<p><a name="index-terminal-mode_002c-of-port-2218"></a>A port that reads from or writes to a terminal has a <dfn>terminal
mode</dfn>; this is either <dfn>cooked</dfn> or <dfn>raw</dfn>.  This mode is
independent of the blocking mode: each can be changed independent of
the other.  Furthermore, a terminal <acronym>I/O</acronym> port has independent
terminal modes both for input and for output.

   <p><a name="index-cooked-mode_002c-of-terminal-port-2219"></a>A terminal port in cooked mode provides some standard processing to make
the terminal easy to communicate with.  For example, under unix, cooked
mode on input reads from the terminal a line at a time and provides
rubout processing within the line, while cooked mode on output might
translate linefeeds to carriage-return/linefeed pairs.  In general, the
precise meaning of cooked mode is operating-system dependent, and
furthermore might be customizable by means of operating system
utilities.  The basic idea is that cooked mode does whatever is
necessary to make the terminal handle all of the usual user-interface
conventions for the operating system, while keeping the program's
interaction with the port as normal as possible.

   <p><a name="index-raw-mode_002c-of-terminal-port-2220"></a>A terminal port in raw mode disables all of that processing.  In raw
mode, characters are directly read from and written to the device
without any translation or interpretation by the operating system.  On
input, characters are available as soon as they are typed, and are not
echoed on the terminal by the operating system.  In general, programs
that put ports in raw mode have to know the details of interacting with
the terminal.  In particular, raw mode is used for writing programs such
as text editors.

   <p>Terminal ports are initially in cooked mode; this can be changed at any
time with the procedures defined in this section.

   <p>These procedures represent cooked mode by the symbol <code>cooked</code>, and
raw mode by the symbol <code>raw</code>.  Additionally, the value <code>#f</code>
represents &ldquo;no mode&rdquo;; it is the terminal mode of a port that is not a
terminal.  An argument called <var>mode</var> must be one of these three
values.  A <var>port</var> argument to any of these procedures may be any
port, even if that port does not support terminal mode; in that case,
the port is not modified in any way.

<div class="defun">
&mdash; procedure: <b>port/input-terminal-mode</b><var> port<a name="index-port_002finput_002dterminal_002dmode-2221"></a></var><br>
<blockquote><p>Returns the input terminal mode of <var>port</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>port/set-input-terminal-mode</b><var> port mode<a name="index-port_002fset_002dinput_002dterminal_002dmode-2222"></a></var><br>
<blockquote><p>Changes the input terminal mode of <var>port</var> to be <var>mode</var>. 
Returns an unspecified value. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>port/with-input-terminal-mode</b><var> port mode thunk<a name="index-port_002fwith_002dinput_002dterminal_002dmode-2223"></a></var><br>
<blockquote><p><var>Thunk</var> must be a procedure of no arguments. 
<code>port/with-input-terminal-mode</code>
binds the input terminal mode of <var>port</var> to be <var>mode</var>, executes
<var>thunk</var>, restores the input terminal mode of <var>port</var> to what it
was when <code>port/with-input-terminal-mode</code> was called, and returns
the value that was yielded by <var>thunk</var>.  This binding is performed
by <code>dynamic-wind</code>, which guarantees that the input terminal mode is
restored if <var>thunk</var> escapes from its continuation. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>port/output-terminal-mode</b><var> port<a name="index-port_002foutput_002dterminal_002dmode-2224"></a></var><br>
<blockquote><p>Returns the output terminal mode of <var>port</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>port/set-output-terminal-mode</b><var> port mode<a name="index-port_002fset_002doutput_002dterminal_002dmode-2225"></a></var><br>
<blockquote><p>Changes the output terminal mode of <var>port</var> to be <var>mode</var>. 
Returns an unspecified value. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>port/with-output-terminal-mode</b><var> port mode thunk<a name="index-port_002fwith_002doutput_002dterminal_002dmode-2226"></a></var><br>
<blockquote><p><var>Thunk</var> must be a procedure of no arguments. 
<code>port/with-output-terminal-mode</code>
binds the output terminal mode of <var>port</var> to be <var>mode</var>, executes
<var>thunk</var>, restores the output terminal mode of <var>port</var> to what it
was when <code>port/with-output-terminal-mode</code> was called, and returns
the value that was yielded by <var>thunk</var>.  This binding is performed
by <code>dynamic-wind</code>, which guarantees that the output terminal mode is
restored if <var>thunk</var> escapes from its continuation. 
</p></blockquote></div>

   </body></html>

