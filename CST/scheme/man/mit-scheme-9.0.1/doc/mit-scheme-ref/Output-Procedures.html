<html lang="en">
<head>
<title>Output Procedures - MIT/GNU Scheme 9.0.1</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="MIT/GNU Scheme 9.0.1">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Input_002fOutput.html#Input_002fOutput" title="Input/Output">
<link rel="prev" href="Input-Procedures.html#Input-Procedures" title="Input Procedures">
<link rel="next" href="Format.html#Format" title="Format">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual documents MIT/GNU Scheme 9.0.1.

Copyright (C) 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993,
    1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,
    2005, 2006, 2007, 2008, 2009, 2010 Massachusetts Institute of
    Technology

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover Texts
     being ``A GNU Manual,'' and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License.''

     (a) The FSF's Back-Cover Text is: ``You have freedom to copy and
     modify this GNU Manual, like GNU software.  Copies published by
     the Free Software Foundation raise funds for GNU development.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Output-Procedures"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Format.html#Format">Format</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Input-Procedures.html#Input-Procedures">Input Procedures</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Input_002fOutput.html#Input_002fOutput">Input/Output</a>
<hr>
</div>

<h3 class="section">14.5 Output Procedures</h3>

<p><a name="index-output-procedures-2078"></a>
<a name="index-buffering_002c-of-output-2079"></a><a name="index-flushing_002c-of-buffered-output-2080"></a>Output ports may or may not support <dfn>buffering</dfn> of output, in which
output characters are collected together in a buffer and then sent to
the output device all at once.  (Most of the output ports implemented by
the runtime system support buffering.)  Sending all of the characters in
the buffer to the output device is called <dfn>flushing</dfn> the buffer.  In
general, output procedures do not flush the buffer of an output port
unless the buffer is full.

   <p><a name="index-discretionary-flushing_002c-of-buffered-output-2081"></a><a name="index-discretionary_002dflush_002doutput-2082"></a>However, the standard output procedures described in this section
perform what is called <dfn>discretionary</dfn> flushing of the buffer. 
Discretionary output flushing works as follows.  After a procedure
performs its output (writing characters to the output buffer), it checks
to see if the port implements an operation called
<code>discretionary-flush-output</code>.  If so, then that operation is
invoked to flush the buffer.  At present, only the console port defines
<code>discretionary-flush-output</code>; this is used to guarantee that output
to the console appears immediately after it is written, without
requiring calls to <code>flush-output</code>.

   <p>All optional arguments called <var>output-port</var>, if not supplied,
default to the current output port.

<div class="defun">
&mdash; procedure: <b>write-char</b><var> char </var>[<var>output-port</var>]<var><a name="index-write_002dchar-2083"></a></var><br>
<blockquote><p><a name="index-character_002c-output-to-port-2084"></a>Writes <var>char</var> (the character itself, not a written representation of
the character) to <var>output-port</var>, performs discretionary output
flushing, and returns an unspecified value. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>write-string</b><var> string </var>[<var>output-port</var>]<var><a name="index-write_002dstring-2085"></a></var><br>
<blockquote><p><a name="index-string_002c-output-to-port-2086"></a>Writes <var>string</var> to <var>output-port</var>, performs discretionary output
flushing, and returns an unspecified value.  This is equivalent to
writing the contents of <var>string</var>, one character at a time using
<code>write-char</code>, except that it is usually much faster. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>write-substring</b><var> string start end </var>[<var>output-port</var>]<var><a name="index-write_002dsubstring-2087"></a></var><br>
<blockquote><p><a name="index-string_002c-output-to-port-2088"></a>Writes the substring defined by <var>string</var>, <var>start</var>, and <var>end</var>
to <var>output-port</var>, performs discretionary output flushing, and
returns an unspecified value.  This is equivalent to writing the
contents of the substring, one character at a time using
<code>write-char</code>, except that it is usually much faster. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>write</b><var> object </var>[<var>output-port</var>]<var><a name="index-write-2089"></a></var><br>
<blockquote><p><a name="index-expression_002c-output-to-port-2090"></a>Writes a written representation of <var>object</var> to <var>output-port</var>,
and returns an unspecified value.  If <var>object</var> has a standard
external representation, then the written representation generated by
<code>write</code> shall be parsable by <code>read</code> into an equivalent object. 
Thus strings that appear in the written representation are enclosed in
doublequotes, and within those strings backslash and doublequote are
escaped by backslashes.  <code>write</code> performs discretionary output
flushing and returns an unspecified value. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>display</b><var> object </var>[<var>output-port</var>]<var><a name="index-display-2091"></a></var><br>
<blockquote><p><a name="index-external-representation_002c-generating-2092"></a><a name="index-generating_002c-external-representation-2093"></a>Writes a representation of <var>object</var> to <var>output-port</var>.  Strings
appear in the written representation as if written by
<code>write-string</code> instead of by <code>write</code>.  Character objects
appear in the representation as if written by <code>write-char</code> instead
of by <code>write</code>.  <code>display</code> performs discretionary output
flushing and returns an unspecified value.<a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>newline</b> [<var>output-port</var>]<var><a name="index-newline-2094"></a></var><br>
<blockquote><p><a name="index-newline-character_002c-output-to-port-2095"></a>Writes an end-of-line to <var>output-port</var>, performs discretionary
output flushing, and returns an unspecified value.  Equivalent to
<code>(write-char #\newline </code><var>output-port</var><code>)</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>fresh-line</b> [<var>output-port</var>]<var><a name="index-fresh_002dline-2096"></a></var><br>
<blockquote><p>Most output ports are able to tell whether or not they are at the
beginning of a line of output.  If <var>output-port</var> is such a port,
this procedure writes an end-of-line to the port only if the port is not
already at the beginning of a line.  If <var>output-port</var> is not such a
port, this procedure is identical to <code>newline</code>.  In either case,
<code>fresh-line</code> performs discretionary output flushing and returns an
unspecified value. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>write-line</b><var> object </var>[<var>output-port</var>]<var><a name="index-write_002dline-2097"></a></var><br>
<blockquote><p>Like <code>write</code>, except that it writes an end-of-line to
<var>output-port</var> after writing <var>object</var>'s representation.  This
procedure performs discretionary output flushing and returns an
unspecified value. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>flush-output</b> [<var>output-port</var>]<var><a name="index-flush_002doutput-2098"></a></var><br>
<blockquote><p>If <var>output-port</var> is buffered, this causes the contents of its buffer
to be written to the output device.  Otherwise it has no effect. 
Returns an unspecified value. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>beep</b> [<var>output-port</var>]<var><a name="index-beep-2099"></a></var><br>
<blockquote><p><a name="index-console_002c-ringing-the-bell-2100"></a><a name="index-ringing-the-console-bell-2101"></a><a name="index-bell_002c-ringing-on-console-2102"></a>Performs a &ldquo;beep&rdquo; operation on <var>output-port</var>, performs
discretionary output flushing, and returns an unspecified value.  On the
console port, this usually causes the console bell to beep, but more
sophisticated interactive ports may take other actions, such as flashing
the screen.  On most output ports, e.g. file and string output ports,
this does nothing. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>clear</b> [<var>output-port</var>]<var><a name="index-clear-2103"></a></var><br>
<blockquote><p><a name="index-console_002c-clearing-2104"></a><a name="index-display_002c-clearing-2105"></a><a name="index-screen_002c-clearing-2106"></a><a name="index-terminal-screen_002c-clearing-2107"></a><a name="index-clearing-the-console-screen-2108"></a>&ldquo;Clears the screen&rdquo; of <var>output-port</var>, performs discretionary
output flushing, and returns an unspecified value.  On a terminal or
window, this has a well-defined effect.  On other output ports, e.g. 
file and string output ports, this does nothing. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>pp</b><var> object </var>[<var>output-port </var>[<var>as-code?</var>]]<var><a name="index-pp-2109"></a></var><br>
<blockquote><p><a name="index-pretty-printer-2110"></a><code>pp</code> prints <var>object</var> in a visually appealing and structurally
revealing manner on <var>output-port</var>.  If object is a procedure,
<code>pp</code> attempts to print the source text.  If the optional argument
<var>as-code?</var> is true, <code>pp</code> prints lists as Scheme code, providing
appropriate indentation; by default this argument is false.  <code>pp</code>
performs discretionary output flushing and returns an unspecified value. 
</p></blockquote></div>

   <p>The following variables may be dynamically bound to change the behavior
of the <code>write</code> and <code>display</code> procedures.

<div class="defun">
&mdash; variable: <b>*unparser-radix*</b><var><a name="index-g_t_002aunparser_002dradix_002a-2111"></a></var><br>
<blockquote><p>This variable specifies the default radix used to print numbers.  Its
value must be one of the exact integers <code>2</code>, <code>8</code>, <code>10</code>,
or <code>16</code>; the default is <code>10</code>.  If <code>*unparser-radix*</code> is
not <code>10</code>, numbers are prefixed to indicate their radix. 
</p></blockquote></div>

<div class="defun">
&mdash; variable: <b>*unparser-list-breadth-limit*</b><var><a name="index-g_t_002aunparser_002dlist_002dbreadth_002dlimit_002a-2112"></a></var><br>
<blockquote><p>This variable specifies a limit on the length of the printed
representation of a list or vector; for example, if the limit is
<code>4</code>, only the first four elements of any list are printed, followed
by ellipses to indicate any additional elements.  The value of this
variable must be an exact non-negative integer, or <code>#f</code> meaning no
limit; the default is <code>#f</code>.

     <pre class="example">          (fluid-let ((*unparser-list-breadth-limit* 4))
            (write-to-string '(a b c d)))
                                          &rArr; "(a b c d)"
          (fluid-let ((*unparser-list-breadth-limit* 4))
            (write-to-string '(a b c d e)))
                                          &rArr; "(a b c d ...)"
</pre>
        </blockquote></div>

<div class="defun">
&mdash; variable: <b>*unparser-list-depth-limit*</b><var><a name="index-g_t_002aunparser_002dlist_002ddepth_002dlimit_002a-2113"></a></var><br>
<blockquote><p>This variable specifies a limit on the nesting of lists and vectors in
the printed representation.  If lists (or vectors) are more deeply
nested than the limit, the part of the representation that exceeds the
limit is replaced by ellipses.  The value of this variable must be an
exact non-negative integer, or <code>#f</code> meaning no limit; the default
is <code>#f</code>.

     <pre class="example">          (fluid-let ((*unparser-list-depth-limit* 4))
            (write-to-string '((((a))) b c d)))
                                          &rArr; "((((a))) b c d)"
          (fluid-let ((*unparser-list-depth-limit* 4))
            (write-to-string '(((((a)))) b c d)))
                                          &rArr; "((((...))) b c d)"
</pre>
        </blockquote></div>

<div class="defun">
&mdash; variable: <b>*unparser-string-length-limit*</b><var><a name="index-g_t_002aunparser_002dstring_002dlength_002dlimit_002a-2114"></a></var><br>
<blockquote><p>This variable specifies a limit on the length of the printed
representation of strings.  If a string's length exceeds this limit, the
part of the printed representation for the characters exceeding the
limit is replaced by ellipses.  The value of this variable must be an
exact non-negative integer, or <code>#f</code> meaning no limit; the default
is <code>#f</code>.

     <pre class="example">          (fluid-let ((*unparser-string-length-limit* 4))
            (write-to-string "abcd"))
                                          &rArr; "\"abcd\""
          (fluid-let ((*unparser-string-length-limit* 4))
            (write-to-string "abcde"))
                                          &rArr; "\"abcd...\""
</pre>
        </blockquote></div>

<div class="defun">
&mdash; variable: <b>*unparse-with-maximum-readability?*</b><var><a name="index-g_t_002aunparse_002dwith_002dmaximum_002dreadability_003f_002a-2115"></a></var><br>
<blockquote><p>This variable, which takes a boolean value, tells the printer to use a
special printed representation for objects that normally print in a form
that cannot be recognized by <code>read</code>.  These objects are printed
using the representation <code>#@</code><var>n</var>, where <var>n</var> is the result
of calling <code>hash</code> on the object to be printed.  The reader
recognizes this syntax, calling <code>unhash</code> on <var>n</var> to get back the
original object.  Note that this printed representation can only be
recognized by the Scheme program in which it was generated, because
these hash numbers are different for each invocation of Scheme. 
</p></blockquote></div>

   <div class="footnote">
<hr>
<h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> <code>write</code> is
intended for producing machine-readable output and <code>display</code> is for
producing human-readable output.</p>

   <hr></div>

   </body></html>

