<html lang="en">
<head>
<title>Debugging Aids - MIT/GNU Scheme 9.0</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="MIT/GNU Scheme 9.0">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Debugging.html#Debugging" title="Debugging">
<link rel="prev" href="Command_002dLine-Debugger.html#Command_002dLine-Debugger" title="Command-Line Debugger">
<link rel="next" href="Advising-Procedures.html#Advising-Procedures" title="Advising Procedures">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual documents the use of MIT/GNU Scheme 9.0.

Copyright (C) 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993,
    1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,
    2005, 2006, 2007, 2008, 2009, 2010 Massachusetts Institute of
    Technology

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover Texts
     being ``A GNU Manual,'' and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License.''

     (a) The FSF's Back-Cover Text is: ``You have freedom to copy and
     modify this GNU Manual, like GNU software.  Copies published by
     the Free Software Foundation raise funds for GNU development.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Debugging-Aids"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Advising-Procedures.html#Advising-Procedures">Advising Procedures</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Command_002dLine-Debugger.html#Command_002dLine-Debugger">Command-Line Debugger</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Debugging.html#Debugging">Debugging</a>
<hr>
</div>

<h3 class="section">5.3 Debugging Aids</h3>

<p>This section describes additional commands that are useful for
debugging.

<div class="defun">
&mdash; procedure: <b>bkpt</b><var> datum argument <small class="dots">...</small><a name="index-bkpt-211"></a></var><br>
<blockquote><p>Sets a breakpoint.  When the breakpoint is encountered, <var>datum</var> and
the <var>argument</var>s are typed (just as for <code>error</code>) and a
read-eval-print loop is entered.  The environment of the read-eval-print
loop is derived by examining the continuation of the call to
<code>bkpt</code>; if the call appears in a non-tail-recursive position, the
environment will be that of the call site.  To exit from the breakpoint
and proceed with the interrupted process, call the procedure
<code>continue</code>.  Sample usage:

     <pre class="example">          1 ]=&gt; (begin (write-line 'foo)
                       (bkpt 'test-2 'test-3)
                       (write-line 'bar)
                       'done)
          
          foo
           test-2 test-3
          ;To continue, call RESTART with an option number:
          ; (RESTART 2) =&gt; Return from BKPT.
          ; (RESTART 1) =&gt; Return to read-eval-print level 1.
          
          2 bkpt&gt; (+ 3 3)
          
          ;Value: 6
          
          2 bkpt&gt; (continue)
          
          bar
          ;Value: done
</pre>
        </blockquote></div>

<div class="defun">
&mdash; procedure: <b>pp</b><var> object </var>[<var>output-port </var>[<var>as-code?</var>]]<var><a name="index-pp-212"></a></var><br>
<blockquote><p>The <code>pp</code> procedure is described in <a href="../scheme/Output-Procedures.html#Output-Procedures">Output Procedures</a>.  However, since this is a very
useful debugging tool, we also mention it here.  <code>pp</code> provides two
very useful functions:

          <ol type=1 start=1>
<li><code>pp</code> will print the source code of a given procedure.  Often, when
debugging, you will have a procedure object but will not know exactly
what procedure it is.  Printing the procedure using <code>pp</code> will show
you the source code, which greatly aids identification.

          <li><code>pp</code> will print the fields of a record structure.  If you have a
compound object pointer, print it using <code>pp</code> to see the component
fields, like this:

          <pre class="example">               (pp (-&gt;pathname "~"))
               -| #[pathname 14 "/usr/home/cph"]
               -| (host #[host 15])
               -| (device unspecific)
               -| (directory (absolute "usr" "home"))
               -| (name "cph")
               -| (type ())
               -| (version unspecific)
</pre>
          <p>When combined with use of the <code>#@</code> syntax, <code>pp</code> provides the
functionality of a simple object inspector.  For example, let's look at
the fields of the host object from the above example:

          <pre class="example">               (pp #@15)
               -| #[host 15]
               -| (type-index 0)
               -| (name ())
</pre>
          </ol>
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>pa</b><var> procedure<a name="index-pa-213"></a></var><br>
<blockquote><p><code>pa</code> prints the arguments of <var>procedure</var>.  This can be used to
remind yourself, for example, of the correct order of the arguments to a
procedure.

     <pre class="example">          for-all?
           &rArr; #[compiled-procedure 40 ("boole" #x6) #xC #x20ECB0]
          
          (pa for-all?)
          -| (items predicate)
          
          (pp for-all?)
          -|(named-lambda (for-all? items predicate)
          -|  (let loop ((items items))
          -|    (or (null? items)
          -|        (and (predicate (car items))
          -|             (loop (cdr items))))))
</pre>
        </blockquote></div>

<div class="defun">
&mdash; procedure: <b>where</b> [<var>obj</var>]<var><a name="index-where-214"></a></var><br>
<blockquote><p><a name="index-environments_002c-examining-215"></a><a name="index-inspecting-environments-216"></a><a name="index-examining-environments-217"></a>The procedure <code>where</code> enters the environment examination system. 
This allows environments and variable bindings to be examined and
modified.  <code>where</code> accepts one-letter commands.  The commands can
be found by typing <kbd>?</kbd> to the &lsquo;<samp><span class="samp">where&gt;</span></samp>&rsquo; prompt.  The optional
argument, <var>obj</var>, is an object with an associated environment: an
environment, a procedure, or a promise.  If <var>obj</var> is omitted, the
environment examined is the read-eval-print environment from which
<code>where</code> was called (or an error or breakpoint environment if called
from the debugger).  If a procedure is supplied, <code>where</code> lets the
user examine the closing environment of the procedure.  This is useful
for debugging procedure arguments and values. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>apropos</b><var> string </var>[<var>environment </var>[<var>search-parents?</var>]]<var><a name="index-apropos-218"></a></var><br>
<blockquote><p><a name="index-finding-procedures-219"></a><a name="index-procedures_002c-finding-220"></a><a name="index-help-221"></a>Search an environment for bound names containing <var>string</var> and print
out the matching bound names.  If <var>environment</var> is specified, it
must be an environment or package name, and it defaults to the current
<acronym>REPL</acronym> environment.  The flag <var>search-parents?</var> specifies
whether the environment's parents should be included in the search.  The
default is <code>#f</code> if <var>environment</var> is specified, and <code>#t</code> if
<var>environment</var> is not specified.

     <pre class="example">          (apropos "search")
          -| #[package 47 (user)]
          -| #[package 48 ()]
          -| list-search-negative
          -| list-search-positive
          -| nt-fs-flag/case-sensitive-search
          -| re-string-search-backward
          -| re-string-search-forward
          -| re-substring-search-backward
          -| re-substring-search-forward
          -| search-ordered-subvector
          -| search-ordered-vector
          -| search-protection-list
          -| string-search-all
          -| string-search-backward
          -| string-search-forward
          -| substring-search-all
          -| substring-search-backward
          -| substring-search-forward
          -| vector-binary-search
</pre>
        </blockquote></div>

   </body></html>

