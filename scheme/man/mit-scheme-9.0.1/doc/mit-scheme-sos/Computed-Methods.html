<html lang="en">
<head>
<title>Computed Methods - SOS 1.9</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="SOS 1.9">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Methods.html#Methods" title="Methods">
<link rel="prev" href="Chained-Methods.html#Chained-Methods" title="Chained Methods">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual documents SOS 1.9.

Copyright (C) 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993,
    1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,
    2005, 2006, 2007, 2008, 2009 Massachusetts Institute of Technology

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover Texts
     being ``A GNU Manual,'' and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License.''

     (a) The FSF's Back-Cover Text is: ``You have freedom to copy and
     modify this GNU Manual, like GNU software.  Copies published by
     the Free Software Foundation raise funds for GNU development.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Computed-Methods"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="Chained-Methods.html#Chained-Methods">Chained Methods</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Methods.html#Methods">Methods</a>
<hr>
</div>

<h3 class="section">5.4 Computed Methods</h3>

<p><a name="index-computed-method-136"></a>A <dfn>computed method</dfn> is a powerful mechanism that provides the
ability to generate methods &ldquo;on the fly&rdquo;.  A computed method is like
an ordinary method, except that its procedure is called during method
combination, and is passed the classes of the arguments in place of the
arguments themselves.  Based on these classes, the computed method
returns an ordinary method, which is combined in the usual way.

   <p>Note that computed methods and computed <span class="sc">emp</span>s both satisfy the
predicate <code>method?</code>.  They are not really methods in that they
cannot be combined with other methods to form an effective method
procedure; however, they are treated as methods by procedures such as
<code>add-method</code> and <code>method-specializers</code>.

<div class="defun">
&mdash; Procedure: <b>make-computed-method</b><var> specializers procedure<a name="index-make_002dcomputed_002dmethod-137"></a></var><br>
<blockquote><p>Create and return a computed method.  <var>Procedure</var> will be called
during method combination with the classes of the generic-procedure
arguments as its arguments.  It must return one of the following:

          <ul>
<li>An ordinary method (as returned by <code>make-method</code> or
<code>make-chained-method</code>).  The returned method's specializers must be
restrictions of <var>specializers</var>, i.e. each specializer in the
returned method must be a subclass of the corresponding specializer in
<var>specializers</var>.  In the usual case, the returned method's
specializers are the same as <var>specializers</var>.

          <li>A procedure, which is converted into an ordinary method by calling
<code>make-method</code> on <var>specializers</var> and the returned procedure.

          <li><code>#f</code>, which means that the computed method declines to generate a
method. 
</ul>
        </p></blockquote></div>

<div class="defun">
&mdash; Procedure: <b>computed-method?</b><var> object<a name="index-computed_002dmethod_003f-138"></a></var><br>
<blockquote><p>Returns <code>#t</code> if <var>object</var> is a computed method, otherwise
returns <code>#f</code>. 
</p></blockquote></div>

   <p><a name="index-computed-emps-139"></a>A <dfn>computed </dfn><span class="sc">emp</span> takes the computed-method mechanism one step
further.  A computed <span class="sc">emp</span> is like a computed method, except that it
returns an effective method procedure rather than a method. 
<code>compute-effective-method-procedure</code> tries each of the applicable
computed <span class="sc">emp</span>s, and if exactly one of them returns an <span class="sc">emp</span>, that
is the resulting effective method procedure.

<div class="defun">
&mdash; Procedure: <b>make-computed-emp</b><var> key specializers procedure<a name="index-make_002dcomputed_002demp-140"></a></var><br>
<blockquote><p>Create and return a computed <span class="sc">emp</span>.  <var>Procedure</var> will be called
during method combination with the classes of the generic-procedure
arguments as its arguments.  It must return either an <span class="sc">emp</span> or
<code>#f</code>.

        <p><var>Key</var> is an arbitrary object that is used to identify the computed
<span class="sc">emp</span>.  The <var>key</var> is used by <code>add-method</code> and
<code>delete-method</code> to decide whether two computed <span class="sc">emp</span>s are
the same; they are the same if their <var>key</var>s are <code>equal?</code>.  This
is necessary because a generic procedure may have more than one computed
<span class="sc">emp</span> with the same specializers. 
</p></blockquote></div>

<div class="defun">
&mdash; Procedure: <b>computed-emp?</b><var> object<a name="index-computed_002demp_003f-141"></a></var><br>
<blockquote><p>Returns <code>#t</code> if <var>object</var> is a computed <span class="sc">emp</span>, otherwise
returns <code>#f</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Generic Procedure: <b>computed-emp-key</b><var> computed-emp<a name="index-computed_002demp_002dkey-142"></a></var><br>
<blockquote><p>Returns the key for <var>computed-emp</var>. 
</p></blockquote></div>

   </body></html>

