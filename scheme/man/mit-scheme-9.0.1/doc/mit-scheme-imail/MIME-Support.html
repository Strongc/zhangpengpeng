<html lang="en">
<head>
<title>MIME Support - IMAIL 1.19</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="IMAIL 1.19">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Commands.html#Commands" title="Commands">
<link rel="prev" href="Multiple-Folders.html#Multiple-Folders" title="Multiple Folders">
<link rel="next" href="Flags.html#Flags" title="Flags">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual documents IMAIL 1.19.

Copyright (C) 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993,
    1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,
    2005, 2006, 2007, 2008, 2009 Massachusetts Institute of Technology

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover Texts
     being ``A GNU Manual,'' and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License.''

     (a) The FSF's Back-Cover Text is: ``You have freedom to copy and
     modify this GNU Manual, like GNU software.  Copies published by
     the Free Software Foundation raise funds for GNU development.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="MIME-Support"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Flags.html#Flags">Flags</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Multiple-Folders.html#Multiple-Folders">Multiple Folders</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Commands.html#Commands">Commands</a>
<hr>
</div>

<h3 class="section">4.4 MIME Support</h3>

<p><a name="index-Multipurpose-Internet-Mail-Extensions-148"></a><a name="index-MIME-149"></a><a name="index-RFC-2045-150"></a><a name="index-MIME-entity-151"></a><a name="index-entity_002c-MIME-152"></a><a name="index-in_002dline-153"></a><a name="index-MIME-attachment-154"></a><a name="index-attachment_002c-MIME-155"></a>The <dfn>Multipurpose Internet Mail Extensions</dfn> (<acronym>MIME</acronym>) define
a standard means for structuring mail messages.  <acronym>MIME</acronym> permits
a message to have multiple parts, each of which is called an
<dfn>entity</dfn>.  It also provides a way to associate type information with
each entity.  For example, an ordinary text message has type
&lsquo;<samp><span class="samp">text/plain</span></samp>&rsquo;, <acronym>HTML</acronym> has type &lsquo;<samp><span class="samp">text/html</span></samp>&rsquo;, and a
<acronym>JPEG</acronym> image has type &lsquo;<samp><span class="samp">image/jpeg</span></samp>&rsquo;.  Additionally,
<acronym>MIME</acronym> entities may be annotated to indicate whether they should
be shown <dfn>in-line</dfn>, or whether they are <dfn>attachments</dfn> that
should be shown only upon further user action.

   <p><acronym>IMAIL</acronym> provides simple support for <acronym>MIME</acronym> messages. 
<acronym>MIME</acronym> attachments are shown in the <acronym>IMAIL</acronym> buffer by
special abbreviations.  You can write an attachment to a file. 
Multipart <acronym>MIME</acronym> structures are recognized and displayed in a
clean format that suppresses unnecessary clutter.  And <acronym>MIME</acronym>
encodings such as <dfn>quoted-printable</dfn> and <dfn>base64</dfn> are
automatically decoded prior to displaying the message or saving the
attachment.

   <p>End-user formatting of <acronym>MIME</acronym> messages is a complex process,
partly because these messages can be arbitrarily complex in their
internal structure.  <acronym>IMAIL</acronym> provides several variables that
give you some control over the formatting prcess.

   <p><a name="index-imail_002dmime_002dboundary_002dstyle-156"></a>Many <acronym>MIME</acronym> messages have multiple parts; for example, a message
with an attachment normally contains at least two parts: the message
text and the attachment.  <acronym>IMAIL</acronym> separates the different parts
of a <acronym>MIME</acronym> message with specially-formatted lines.  There are
several styles of separator lines available, selected by changing the
value of the variable <code>imail-mime-boundary-style</code>.  The default
value of <code>simple</code> means to use long lines of hyphen characters as
the separator lines.  A value of <code>sgml</code> means use long lines of
hyphens that are wrapped with &lsquo;<samp><span class="samp">&lt;!--</span></samp>&rsquo; and &lsquo;<samp><span class="samp">--&gt;</span></samp>&rsquo;, which makes
them valid <acronym>SGML</acronym> comments.  A value of <code>original</code> means to
use the original <acronym>MIME</acronym> <dfn>boundaries</dfn>, which have certain
useful syntactic properties but are not as visually distinctive.

   <p><a name="index-imail_002dmime_002dshow_002dalternatives-157"></a><acronym>MIME</acronym> also specifies a particular kind of multipart message, of
type &lsquo;<samp><span class="samp">multipart/alternative</span></samp>&rsquo;, in which the parts are different
representations of the same message.  A typical example of this is a
mailer that sends both plain text and <acronym>HTML</acronym> versions of the
message text.  Normally <acronym>IMAIL</acronym> shows only the simplest of these
parts (which is almost always plain text) and suppresses the
alternatives.  However, if you set the variable
<code>imail-mime-show-alternatives</code> to <code>#t</code>, <acronym>IMAIL</acronym> will
show these alternative forms as attachments.

   <p><a name="index-imail_002dmime_002dcollapse_002ddigest-158"></a>Another kind of multipart <acronym>MIME</acronym> message is the digest message,
which has type &lsquo;<samp><span class="samp">multipart/digest</span></samp>&rsquo;.  Digest messages are normally
used by high-volume mailing lists to reduce the number of messages sent
to the end user; instead the user receives one message containing all of
the messages from that list in a particular time period, usually a day. 
<acronym>IMAIL</acronym> can present <acronym>MIME</acronym> digest messages in one of two
formats.  The default format is to show all of the component messages of
the digest as attachments.  This is particularly useful for large
digests that you will only read a few messages from, since you can scan
the digest contents for interesting messages without downloading all of
the messages in the digest.  In the alternative format, selected by
setting <code>imail-mime-collapse-digest</code> to <code>#f</code>, the component
messages of a digest are all shown inline.

   <p>As a general rule, any <acronym>MIME</acronym> entity that contains non-textual
information is displayed as an attachment.  Attachments are normally
shown as specially-formatted abbreviations.  Here is an example:

<pre class="example">     &lt;imail-part
         name="foo.doc"
         type="application/msword"
         length="55499"
         /&gt;
</pre>
   <p class="noindent">This shows various things about the attachment, including its (optional)
name, its <acronym>MIME</acronym> type, and the length of the attachment in
bytes.  (The length is computed on the encoded form of the attachment,
and is generally slightly larger than the decoded length.)

   <p><acronym>IMAIL</acronym> uses somewhat more complicated rules for deciding when a
<acronym>MIME</acronym> entity is displayed in this abbreviated format, and when
it is expanded in line.  In general, all non-text entities are
abbreviated.  Additionally, if a text entity is given a
<dfn><acronym>MIME</acronym> disposition</dfn> of &lsquo;<samp><span class="samp">attachment</span></samp>&rsquo;, if the character
set of the entity is unknown, if the encoding type is unknown, or if the
subtype is unknown, it is abbreviated.

   <p><a name="index-imail_002dknown_002dmime_002dcharsets-159"></a><a name="index-imail_002dinline_002dmime_002dtext_002dsubtypes-160"></a>Two variables control the abbreviation of text entities. 
<code>imail-known-mime-charsets</code> is a list of regular expressions that
specify the known character sets; by default it specifies
<acronym>US-ASCII</acronym>, the <acronym>ISO</acronym> 8859 character sets, and some
random but commonly-seen Microsoft Windows character sets.  The variable
<code>imail-inline-mime-text-subtypes</code> contains a list of symbols, each
of which is the name of a text subtype that should be shown in line. 
For example, if the symbol <code>html</code> is in this list, then
<acronym>MIME</acronym> parts of type <code>text/html</code> are shown in-line.  Text
subtypes not appearing in this list are abbreviated as attachments.

   <p>Here are <acronym>IMAIL</acronym>'s <acronym>MIME</acronym>-specific commands:

     <dl>
<dt><kbd>C-o</kbd><dd>Save a <acronym>MIME</acronym> attachment to a file
(<code>imail-save-attachment</code>).

     <br><dt><kbd>w</kbd><dd>Save an arbitrary <acronym>MIME</acronym> entity (message part) to a file
(<code>imail-save-mime-entity</code>).

     <br><dt><kbd>C-c C-t C-e</kbd><dd>Toggle a <acronym>MIME</acronym> entity between its formatted and raw forms
(<code>imail-toggle-mime-entity</code>). 
</dl>

   <p><a name="index-C_002do-161"></a><a name="index-imail_002dsave_002dattachment-162"></a>The primary <acronym>MIME</acronym> command is <kbd>C-o</kbd>
(<code>imail-save-attachment</code>), which saves a single attachment to a
file.  If point is on an attachment, that is the attachment to be saved,
otherwise <acronym>IMAIL</acronym> prompts for an attachment by name.  If a
prefix argument is specified, prompting is performed even if point is on
an attachment.  Once the attachment is determined, <acronym>IMAIL</acronym>
prompts for the name of a file to save the attachment to.  The filename
is initialized from the name specified by the attachment, if any.  The
directory of the filename is initialized to the directory in which the
last attachment was saved, or the user's home directory if no
attachments have previously been saved.

   <p><a name="index-imail_002dmime_002dattachment_002ddirectory-163"></a>If you want to save attachments to a specific directory, change the
variable <code>imail-mime-attachment-directory</code> to contain the name of
that directory.

   <p><a name="index-w-164"></a><a name="index-imail_002dsave_002dmime_002dentity-165"></a>The command <kbd>w</kbd> (<code>imail-save-mime-entity</code>) is similar to
<code>imail-save-attachment</code> except that it will save any <acronym>MIME</acronym>
entity, not just an attachment.  For example, this allows you to save
the message text.  This command saves the entity that point is on; if
point is not on any entity, an error is signalled.  If the entity is
encoded, e.g. with quoted-printable or base64 encoding, it is decoded
before it is saved.  If the entity is text, it is written to the file in
text mode (relevant only under Windows and OS/2); otherwise it is
written in binary mode.

   <p><a name="index-imail_002dmouse_002dsave_002dmime_002dentity-166"></a>A simpler way to save a <acronym>MIME</acronym> entity is to point at the entity
with the mouse and click the right button
(<code>imail-mouse-save-mime-entity</code>).  This works the same way as
<code>imail-save-mime-entity</code> except that the entity is selected by the
mouse instead of point.

   <p><a name="index-C_002dc-C_002dt-C_002de-167"></a><a name="index-imail_002dtoggle_002dmime_002dentity-168"></a>The command <kbd>C-c C-t C-e</kbd> (<code>imail-toggle-mime-entity</code>) is
similar to <code>imail-save-mime-entity</code>, except that instead of saving
the entity to a file, it toggles whether the entity is shown in-line or
in abbreviated form.  A common situation in which this is useful is when
the text of a message is in an unknown character set.  In this case,
<acronym>IMAIL</acronym> by default shows the text in abbreviated form; use
<kbd>C-t</kbd> to expand it in place.

   </body></html>

