<html lang="en">
<head>
<title>Components of Pathnames - MIT/GNU Scheme 9.0.1</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="MIT/GNU Scheme 9.0.1">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Pathnames.html#Pathnames" title="Pathnames">
<link rel="prev" href="Filenames-and-Pathnames.html#Filenames-and-Pathnames" title="Filenames and Pathnames">
<link rel="next" href="Operations-on-Pathnames.html#Operations-on-Pathnames" title="Operations on Pathnames">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual documents MIT/GNU Scheme 9.0.1.

Copyright (C) 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993,
    1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,
    2005, 2006, 2007, 2008, 2009, 2010 Massachusetts Institute of
    Technology

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover Texts
     being ``A GNU Manual,'' and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License.''

     (a) The FSF's Back-Cover Text is: ``You have freedom to copy and
     modify this GNU Manual, like GNU software.  Copies published by
     the Free Software Foundation raise funds for GNU development.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Components-of-Pathnames"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Operations-on-Pathnames.html#Operations-on-Pathnames">Operations on Pathnames</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Filenames-and-Pathnames.html#Filenames-and-Pathnames">Filenames and Pathnames</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Pathnames.html#Pathnames">Pathnames</a>
<hr>
</div>

<h4 class="subsection">15.1.2 Components of Pathnames</h4>

<p><a name="index-components_002c-of-pathname-2490"></a><a name="index-pathname-components-2491"></a>
<!-- **** begin CLTL **** -->
A pathname object always has six components, described below.  These
components are the common interface that allows programs to work the
same way with different file systems; the mapping of the pathname
components into the concepts peculiar to each file system is taken care
of by the Scheme implementation.

     <dl>
<dt><var>host</var><dd>The name of the file system on which the file resides.  In the current
implementation, this component is always a host object that is filled in
automatically by the runtime system.  When specifying the host
component, use either <code>#f</code> or the value of the variable
<code>local-host</code>. 
<a name="index-host_002c-pathname-component-2492"></a>
<br><dt><var>device</var><dd>Corresponds to the &ldquo;device&rdquo; or &ldquo;file structure&rdquo; concept in many host
file systems: the name of a (logical or physical) device containing
files.  This component is the drive letter for PC file systems, and is
unused for unix file systems. 
<a name="index-device_002c-pathname-component-2493"></a>
<br><dt><var>directory</var><dd>Corresponds to the &ldquo;directory&rdquo; concept in many host file systems: the
name of a group of related files (typically those belonging to a single
user or project).  This component is always used for all file systems. 
<a name="index-directory_002c-pathname-component-2494"></a>
<br><dt><var>name</var><dd>The name of a group of files that can be thought of as conceptually the
&ldquo;same&rdquo; file.  This component is always used for all file systems. 
<a name="index-name_002c-pathname-component-2495"></a>
<br><dt><var>type</var><dd>Corresponds to the &ldquo;filetype&rdquo; or &ldquo;extension&rdquo; concept in many host
file systems.  This says what kind of file this is.  Files with the same
name but different type are usually related in some specific way, such
as one being a source file, another the compiled form of that source,
and a third the listing of error messages from the compiler.  This
component is currently used for all file systems, and is formed by
taking the characters that follow the last dot in the namestring. 
<a name="index-type_002c-pathname-component-2496"></a>
<br><dt><var>version</var><dd>Corresponds to the &ldquo;version number&rdquo; concept in many host file systems. 
Typically this is a number that is incremented every time the file is
modified.  This component is currently unused for all file systems. 
<a name="index-version_002c-pathname-component-2497"></a></dl>

   <p>Note that a pathname is not necessarily the name of a specific file. 
Rather, it is a specification (possibly only a partial specification) of
how to access a file.  A pathname need not correspond to any file that
actually exists, and more than one pathname can refer to the same file. 
For example, the pathname with a version of <code>newest</code> may refer to
the same file as a pathname with the same components except a certain
number as the version.  Indeed, a pathname with version <code>newest</code>
may refer to different files as time passes, because the meaning of such
a pathname depends on the state of the file system.  In file systems
with such facilities as &ldquo;links&rdquo;, multiple file names, logical devices,
and so on, two pathnames that look quite different may turn out to
address the same file.  To access a file given a pathname, one must do a
file-system operation such as <code>open-input-file</code>.

   <p>Two important operations involving pathnames are <dfn>parsing</dfn> and
<dfn>merging</dfn>.  Parsing is the conversion of a filename (which might be
something supplied interactively  by the users when asked to supply the
name of a file) into a pathname object.  This operation is
implementation-dependent, because the format of filenames is
implementation-dependent.  Merging takes a pathname with missing
components and supplies values for those components from a source of
default values.

   <p>Not all of the components of a pathname need to be specified.  If a
component of a pathname is missing, its value is <code>#f</code>. 
Before the file system interface can do anything interesting with a
file, such as opening the file, all the missing components of a pathname
must be filled in.  Pathnames with missing components are used
internally for various purposes; in particular, parsing a namestring
that does not specify certain components will result in a pathname with
missing components.

   <p>Any component of a pathname may be the symbol <code>unspecific</code>, meaning
that the component simply does not exist, for file systems in which such
a value makes no sense.  For example, unix and Windows file
systems usually do not support version numbers, so the version component
for such a host might be <code>unspecific</code>.<a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>
<!-- **** end CLTL **** -->

   <p>In addition to <code>#f</code> and <code>unspecific</code>, the components of a
pathname may take on the following meaningful values:

     <dl>
<dt><var>host</var><dd>An implementation-defined type which may be tested for using the
<code>host?</code> predicate.

     <br><dt><var>device</var><dd>On systems that support this component (Windows), it may be specified
as a string containing a single alphabetic character, for which the
alphabetic case is ignored.

     <br><dt><var>directory</var><dd>A non-empty list, which represents a <dfn>directory path</dfn>: a sequence of
directories, each of which has a name in the previous directory, the
last of which is the directory specified by the entire path.  Each
element in such a path specifies the name of the directory relative to
the directory specified by the elements to its left.  The first element
of the list is either the symbol <code>absolute</code> or the symbol
<code>relative</code>.  If the first element in the list is the symbol
<code>absolute</code>, then the directory component (and subsequently the
pathname) is <dfn>absolute</dfn>; the first component in the sequence is to
be found at the &ldquo;root&rdquo; of the file system.  If the directory is
<dfn>relative</dfn> then the first component is to be found in some as yet
unspecified directory; typically this is later specified to be the
<dfn>current working directory</dfn>. 
<a name="index-root_002c-as-pathname-component-2498"></a><a name="index-directory-path-_0028defn_0029-2499"></a><a name="index-path_002c-directory-_0028defn_0029-2500"></a>
<a name="index-up_002c-as-pathname-component-2501"></a><a name="index-parent_002c-of-directory-2502"></a>Aside from <code>absolute</code> and <code>relative</code>, which may only appear as
the first element of the list, each subsequent element in the list is
either: a string, which is a literal component; the symbol <code>wild</code>,
meaningful only when used in conjunction with the directory reader; or
the symbol <code>up</code>, meaning the next directory is the &ldquo;parent&rdquo; of
the previous one.  <code>up</code> corresponds to the file <samp><span class="file">..</span></samp> in unix
and PC file systems.

     <p>(The following note does not refer to any file system currently
supported by MIT/GNU Scheme, but is included for completeness.)  In file
systems that do not have &ldquo;hierarchical&rdquo; structure, a specified
directory component will always be a list whose first element is
<code>absolute</code>.  If the system does not support directories other than
a single global directory, the list will have no other elements.  If the
system supports &ldquo;flat&rdquo; directories, i.e. a global set of directories
with no subdirectories, then the list will contain a second element,
which is either a string or <code>wild</code>.  In other words, a
non-hierarchical file system is treated as if it were hierarchical, but
the hierarchical features are unused.  This representation is somewhat
inconvenient for such file systems, but it discourages programmers from
making code depend on the lack of a file hierarchy.

     <br><dt><var>name</var><dd>A string, which is a literal component; or the symbol <code>wild</code>,
meaningful only when used in conjunction with the directory reader.

     <br><dt><var>type</var><dd>A string, which is a literal component; or the symbol <code>wild</code>,
meaningful only when used in conjunction with the directory reader.

     <br><dt><var>version</var><dd>An exact positive integer, which is a literal component; the symbol
<code>newest</code>, which means to choose the largest available version
number for that file; the symbol <code>oldest</code>, which means to choose
the smallest version number; or the symbol <code>wild</code>, meaningful only
when used in conjunction with the directory reader.  In the future some
other possible values may be added, e.g. <code>installed</code>.  Note that
currently no file systems support version numbers; thus this component
is not used and should be specified as <code>#f</code>. 
<a name="index-newest_002c-as-pathname-component-2503"></a><a name="index-oldest_002c-as-pathname-component-2504"></a><a name="index-installed_002c-as-pathname-component-2505"></a></dl>

<div class="defun">
&mdash; procedure: <b>make-pathname</b><var> host device directory name type version<a name="index-make_002dpathname-2506"></a></var><br>
<blockquote><p><a name="index-construction_002c-of-pathname-2507"></a>Returns a pathname object whose components are the respective arguments. 
Each argument must satisfy the restrictions for the corresponding
component, which were outlined above.

     <pre class="example">          (make-pathname #f
                         #f
                         '(absolute "usr" "morris")
                         "foo"
                         "scm"
                         #f)
               &rArr;  #[pathname 67 "/usr/morris/foo.scm"]
</pre>
        </blockquote></div>

<div class="defun">
&mdash; procedure: <b>pathname-host</b><var> pathname<a name="index-pathname_002dhost-2508"></a></var><br>
&mdash; procedure: <b>pathname-device</b><var> pathname<a name="index-pathname_002ddevice-2509"></a></var><br>
&mdash; procedure: <b>pathname-directory</b><var> pathname<a name="index-pathname_002ddirectory-2510"></a></var><br>
&mdash; procedure: <b>pathname-name</b><var> pathname<a name="index-pathname_002dname-2511"></a></var><br>
&mdash; procedure: <b>pathname-type</b><var> pathname<a name="index-pathname_002dtype-2512"></a></var><br>
&mdash; procedure: <b>pathname-version</b><var> pathname<a name="index-pathname_002dversion-2513"></a></var><br>
<blockquote><p>Returns a particular component of <var>pathname</var>.

     <pre class="example">          (define x (-&gt;pathname "/usr/morris/foo.scm"))
          (pathname-host x)       &rArr;  #[host 1]
          (pathname-device x)     &rArr;  unspecific
          (pathname-directory x)  &rArr;  (absolute "usr" "morris")
          (pathname-name x)       &rArr;  "foo"
          (pathname-type x)       &rArr;  "scm"
          (pathname-version x)    &rArr;  unspecific
</pre>
        </blockquote></div>

<div class="defun">
&mdash; procedure: <b>pathname-new-device</b><var> pathname device<a name="index-pathname_002dnew_002ddevice-2514"></a></var><br>
&mdash; procedure: <b>pathname-new-directory</b><var> pathname directory<a name="index-pathname_002dnew_002ddirectory-2515"></a></var><br>
&mdash; procedure: <b>pathname-new-name</b><var> pathname name<a name="index-pathname_002dnew_002dname-2516"></a></var><br>
&mdash; procedure: <b>pathname-new-type</b><var> pathname type<a name="index-pathname_002dnew_002dtype-2517"></a></var><br>
&mdash; procedure: <b>pathname-new-version</b><var> pathname version<a name="index-pathname_002dnew_002dversion-2518"></a></var><br>
<blockquote><p>Returns a new copy of <var>pathname</var> with the respective component
replaced by the second argument.  <var>Pathname</var> is unchanged. 
Portable programs should not explicitly replace a component with
<code>unspecific</code> because this might not be permitted in some
situations.

     <pre class="example">          (define p (-&gt;pathname "/usr/blisp/rel15"))
          p
               &rArr;  #[pathname 71 "/usr/blisp/rel15"]
          (pathname-new-name p "rel100")
               &rArr;  #[pathname 72 "/usr/blisp/rel100"]
          (pathname-new-directory p '(relative "test" "morris"))
               &rArr;  #[pathname 73 "test/morris/rel15"]
          p
               &rArr;  #[pathname 71 "/usr/blisp/rel15"]
</pre>
        </blockquote></div>

<div class="defun">
&mdash; procedure: <b>pathname-default-device</b><var> pathname device<a name="index-pathname_002ddefault_002ddevice-2519"></a></var><br>
&mdash; procedure: <b>pathname-default-directory</b><var> pathname directory<a name="index-pathname_002ddefault_002ddirectory-2520"></a></var><br>
&mdash; procedure: <b>pathname-default-name</b><var> pathname name<a name="index-pathname_002ddefault_002dname-2521"></a></var><br>
&mdash; procedure: <b>pathname-default-type</b><var> pathname type<a name="index-pathname_002ddefault_002dtype-2522"></a></var><br>
&mdash; procedure: <b>pathname-default-version</b><var> pathname version<a name="index-pathname_002ddefault_002dversion-2523"></a></var><br>
<blockquote><p>These operations are similar to the <code>pathname-new-</code><var>component</var>
operations, except that they only change the specified <var>component</var>
if it has the value <code>#f</code> in <var>pathname</var>. 
</p></blockquote></div>

   <div class="footnote">
<hr>
<h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> This description is
adapted from <cite>Common Lisp, The Language</cite>, second edition, section
23.1.1.</p>

   <hr></div>

   </body></html>

