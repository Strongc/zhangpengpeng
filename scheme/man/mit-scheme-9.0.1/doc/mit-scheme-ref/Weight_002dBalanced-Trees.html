<html lang="en">
<head>
<title>Weight-Balanced Trees - MIT/GNU Scheme 9.0.1</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="MIT/GNU Scheme 9.0.1">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Associations.html#Associations" title="Associations">
<link rel="prev" href="Red_002dBlack-Trees.html#Red_002dBlack-Trees" title="Red-Black Trees">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual documents MIT/GNU Scheme 9.0.1.

Copyright (C) 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993,
    1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,
    2005, 2006, 2007, 2008, 2009, 2010 Massachusetts Institute of
    Technology

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover Texts
     being ``A GNU Manual,'' and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License.''

     (a) The FSF's Back-Cover Text is: ``You have freedom to copy and
     modify this GNU Manual, like GNU software.  Copies published by
     the Free Software Foundation raise funds for GNU development.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Weight-Balanced-Trees"></a>
<a name="Weight_002dBalanced-Trees"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="Red_002dBlack-Trees.html#Red_002dBlack-Trees">Red-Black Trees</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Associations.html#Associations">Associations</a>
<hr>
</div>

<h3 class="section">11.7 Weight-Balanced Trees</h3>

<p><a name="index-trees_002c-balanced-binary-1748"></a><a name="index-balanced-binary-trees-1749"></a><a name="index-binary-trees-1750"></a><a name="index-weight_002dbalanced-binary-trees-1751"></a>Balanced binary trees are a useful data structure for maintaining large
sets of ordered objects or sets of associations whose keys are ordered. 
MIT/GNU Scheme has a comprehensive implementation of weight-balanced binary
trees which has several advantages over the other data structures for
large aggregates:

     <ul>
<li>In addition to the usual element-level operations like insertion,
deletion and lookup, there is a full complement of collection-level
operations, like set intersection, set union and subset test, all of
which are implemented with good orders of growth in time and space. 
This makes weight-balanced trees ideal for rapid prototyping of
functionally derived specifications.

     <li>An element in a tree may be indexed by its position under the ordering
of the keys, and the ordinal position of an element may be determined,
both with reasonable efficiency.

     <li>Operations to find and remove minimum element make weight-balanced trees
simple to use for priority queues.

     <li>The implementation is <em>functional</em> rather than <em>imperative</em>. 
This means that operations like `inserting' an association in a tree do
not destroy the old tree, in much the same way that <code>(+ 1 x)</code>
modifies neither the constant 1 nor the value bound to <code>x</code>.  The
trees are referentially transparent thus the programmer need not worry
about copying the trees.  Referential transparency allows space
efficiency to be achieved by sharing subtrees. 
</ul>

   <p>These features make weight-balanced trees suitable for a wide range of
applications, especially those that require large numbers of sets or
discrete maps.  Applications that have a few global databases and/or
concentrate on element-level operations like insertion and lookup are
probably better off using hash tables or red-black trees.

   <p>The <em>size</em> of a tree is the number of associations that it
contains.  Weight-balanced binary trees are balanced to keep the sizes
of the subtrees of each node within a constant factor of each other. 
This ensures logarithmic times for single-path operations (like lookup
and insertion).  A weight-balanced tree takes space that is proportional
to the number of associations in the tree.  For the current
implementation, the constant of proportionality is six words per
association.

   <p><a name="index-binary-trees_002c-as-sets-1752"></a><a name="index-binary-trees_002c-as-discrete-maps-1753"></a><a name="index-sets_002c-using-binary-trees-1754"></a><a name="index-discrete-maps_002c-using-binary-trees-1755"></a>Weight-balanced trees can be used as an implementation for either
discrete sets or discrete maps (associations).  Sets are implemented by
ignoring the datum that is associated with the key.  Under this scheme
if an association exists in the tree this indicates that the key of the
association is a member of the set.  Typically a value such as
<code>()</code>, <code>#t</code> or <code>#f</code> is associated with the key.

   <p>Many operations can be viewed as computing a result that, depending on
whether the tree arguments are thought of as sets or maps, is known by
two different names.  An example is <code>wt-tree/member?</code>, which, when
regarding the tree argument as a set, computes the set membership
operation, but, when regarding the tree as a discrete map,
<code>wt-tree/member?</code> is the predicate testing if the map is defined at
an element in its domain.  Most names in this package have been chosen
based on interpreting the trees as sets, hence the name
<code>wt-tree/member?</code> rather than <code>wt-tree/defined-at?</code>.

   <p><a name="index-run_002dtime_002dloadable-option-1756"></a><a name="index-option_002c-run_002dtime_002dloadable-1757"></a>The weight-balanced tree implementation is a run-time-loadable option. 
To use weight-balanced trees, execute

<pre class="example">     (load-option 'wt-tree)
</pre>
   <p><a name="index-load_002doption-1758"></a>
once before calling any of the procedures defined here.

<ul class="menu">
<li><a accesskey="1" href="Construction-of-Weight_002dBalanced-Trees.html#Construction-of-Weight_002dBalanced-Trees">Construction of Weight-Balanced Trees</a>
<li><a accesskey="2" href="Basic-Operations-on-Weight_002dBalanced-Trees.html#Basic-Operations-on-Weight_002dBalanced-Trees">Basic Operations on Weight-Balanced Trees</a>
<li><a accesskey="3" href="Advanced-Operations-on-Weight_002dBalanced-Trees.html#Advanced-Operations-on-Weight_002dBalanced-Trees">Advanced Operations on Weight-Balanced Trees</a>
<li><a accesskey="4" href="Indexing-Operations-on-Weight_002dBalanced-Trees.html#Indexing-Operations-on-Weight_002dBalanced-Trees">Indexing Operations on Weight-Balanced Trees</a>
</ul>

   </body></html>

