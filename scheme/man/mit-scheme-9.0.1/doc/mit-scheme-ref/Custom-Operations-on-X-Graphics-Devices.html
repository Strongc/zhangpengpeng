<html lang="en">
<head>
<title>Custom Operations on X Graphics Devices - MIT/GNU Scheme 9.0.1</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="MIT/GNU Scheme 9.0.1">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="X-Graphics.html#X-Graphics" title="X Graphics">
<link rel="prev" href="Utilities-for-X-Graphics.html#Utilities-for-X-Graphics" title="Utilities for X Graphics">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual documents MIT/GNU Scheme 9.0.1.

Copyright (C) 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993,
    1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,
    2005, 2006, 2007, 2008, 2009, 2010 Massachusetts Institute of
    Technology

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover Texts
     being ``A GNU Manual,'' and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License.''

     (a) The FSF's Back-Cover Text is: ``You have freedom to copy and
     modify this GNU Manual, like GNU software.  Copies published by
     the Free Software Foundation raise funds for GNU development.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Custom-Operations-on-X-Graphics-Devices"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="Utilities-for-X-Graphics.html#Utilities-for-X-Graphics">Utilities for X Graphics</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="X-Graphics.html#X-Graphics">X Graphics</a>
<hr>
</div>

<h4 class="subsection">17.9.3 Custom Operations on X Graphics Devices</h4>

<p>Custom operations are invoked using the procedure
<code>graphics-operation</code>.  For example,

<pre class="example">     (graphics-operation device 'set-foreground-color "blue")
</pre>
   <div class="defun">
&mdash; operation on x-graphics-device: <b>set-background-color</b><var> color-name<a name="index-set_002dbackground_002dcolor-on-x_002dgraphics_002ddevice-3047"></a></var><br>
&mdash; operation on x-graphics-device: <b>set-foreground-color</b><var> color-name<a name="index-set_002dforeground_002dcolor-on-x_002dgraphics_002ddevice-3048"></a></var><br>
&mdash; operation on x-graphics-device: <b>set-border-color</b><var> color-name<a name="index-set_002dborder_002dcolor-on-x_002dgraphics_002ddevice-3049"></a></var><br>
&mdash; operation on x-graphics-device: <b>set-mouse-color</b><var> color-name<a name="index-set_002dmouse_002dcolor-on-x_002dgraphics_002ddevice-3050"></a></var><br>
<blockquote><p><a name="index-graphics_002dclear-3051"></a>These operations change the colors associated with a window. 
<var>Color-name</var> must be a string, which is the X server's name for the
desired color.  <code>set-border-color</code> and <code>set-mouse-color</code>
immediately change the border and mouse-cursor colors. 
<code>set-background-color</code> and <code>set-foreground-color</code> change the
colors to be used when drawing, but have no effect on anything drawn
prior to their invocation.  Because changing the background color
affects the entire window, we recommend calling <code>graphics-clear</code> on
the window's device afterwards.  Color names include both mnemonic
names, like <code>"red"</code>, and intensity names specified in the
<code>"#</code><var>rrggbb</var><code>"</code> notation. 
</p></blockquote></div>

<div class="defun">
&mdash; operation on x-graphics-device: <b>draw-arc</b><var> x y radius-x radius-y angle-start angle-sweep fill?<a name="index-draw_002darc-on-x_002dgraphics_002ddevice-3052"></a></var><br>
<blockquote><p><a name="index-drawing-arcs-and-circles_002c-graphics-3053"></a><a name="index-graphics_002c-drawing-arcs-and-circles-3054"></a><a name="index-circles_002c-drawing-3055"></a><a name="index-draw_002darc-3056"></a>
Operation <code>draw-arc</code> draws or fills an arc.  An arc is a segment of
a circle, which may have been stretched along the x- or y- axis to form
an ellipse.

        <p>The parameters <var>x</var>, <var>y</var>, <var>radius-x</var> and <var>radius-y</var>
describe the circle and <var>angle-start</var> and <var>angle-sweep</var> choose
which part of the circle is drawn.  The arc is drawn on the graphics
device with the center of the circle at the virtual coordinates given by
<var>x</var> and <var>y</var>.  <var>radius-x</var> and <var>radius-y</var> determine the
size of the circle in virtual coordinate units.

        <p>The parameter <var>angle-start</var> determines where the arc starts.  It is
measured in degrees in an anti-clockwise direction, starting at 3
o'clock.  <var>angle-sweep</var> determines how much of the circle is drawn. 
It too is measured anti-clockwise in degrees.  A negative value means
the measurement is in a clockwise direction.

        <p>Note that the angles are determined on a unit circle before it is
stretched into an ellipse, so the actual angles that you will see on the
computer screen depends on all of: <var>radius-x</var> and <var>radius-y</var>,
the window size, and the virtual coordinates.

        <p>If <var>fill?</var> is <code>#f</code> then just the segment of the circle is
drawn, otherwise the arc is filled in a pie-slice fashion.

        <p>This draws a quarter circle pie slice, standing on its point, with point
at virtual coordinates (3,5):

     <pre class="example">          (graphics-opereration g 'draw-arc 3 5 .5 .5 45 90 #t)
</pre>
        </blockquote></div>

<div class="defun">
&mdash; operation on x-graphics-device: <b>draw-circle</b><var> x y radius<a name="index-draw_002dcircle-on-x_002dgraphics_002ddevice-3057"></a></var><br>
&mdash; operation on x-graphics-device: <b>fill-circle</b><var> x y radius<a name="index-fill_002dcircle-on-x_002dgraphics_002ddevice-3058"></a></var><br>
<blockquote><p><a name="index-drawing-arcs-and-circles_002c-graphics-3059"></a><a name="index-graphics_002c-drawing-arcs-and-circles-3060"></a><a name="index-circles_002c-drawing-3061"></a><a name="index-draw_002dcircle-3062"></a><a name="index-fill_002dcircle-3063"></a>These operations draw a circle (outline) or a filled circle (solid) at
on the graphics device at the virtual coordinates given by <var>x</var> and
<var>y</var>.  These operations could be implemented trivially interms of the
<code>draw-arc</code> operation. 
</p></blockquote></div>

<div class="defun">
&mdash; operation on x-graphics-device: <b>set-border-width</b><var> width<a name="index-set_002dborder_002dwidth-on-x_002dgraphics_002ddevice-3064"></a></var><br>
&mdash; operation on x-graphics-device: <b>set-internal-border-width</b><var> width<a name="index-set_002dinternal_002dborder_002dwidth-on-x_002dgraphics_002ddevice-3065"></a></var><br>
<blockquote><p><a name="index-graphics_002dclear-3066"></a>These operations change the external and internal border widths of a
window.  <var>Width</var> must be an exact non-negative integer, specified in
pixels.  The change takes place immediately.  Note that changing the
internal border width can cause displayed graphics to be garbled; we
recommend calling <code>graphics-clear</code> on the window's device after
doing so. 
</p></blockquote></div>

<div class="defun">
&mdash; operation on x-graphics-device: <b>set-font</b><var> font-name<a name="index-set_002dfont-on-x_002dgraphics_002ddevice-3067"></a></var><br>
<blockquote><p>Changes the font used when drawing text in a window.  <var>Font-name</var>
must be a string that is a font name known to the X server.  This
operation does not affect text drawn prior to its invocation. 
</p></blockquote></div>

<div class="defun">
&mdash; operation on x-graphics-device: <b>set-mouse-shape</b><var> shape-number<a name="index-set_002dmouse_002dshape-on-x_002dgraphics_002ddevice-3068"></a></var><br>
<blockquote><p>Changes the shape of the mouse cursor.  <var>Shape-number</var> is an exact
non-negative integer that is used as an index into the mouse-shape font;
when multiplied by 2 this number corresponds to an index in the file<br>
<samp><span class="file">/usr/include/X11/cursorfont.h</span></samp>. 
</p></blockquote></div>

<div class="defun">
&mdash; operation on x-graphics-device: <b>map-window</b><var><a name="index-map_002dwindow-on-x_002dgraphics_002ddevice-3069"></a></var><br>
&mdash; operation on x-graphics-device: <b>withdraw-window</b><var><a name="index-withdraw_002dwindow-on-x_002dgraphics_002ddevice-3070"></a></var><br>
<blockquote><p>These operations control the mapping of windows.  They correspond
directly to Xlib's <code>XMapWindow</code> and <code>XWithdrawWindow</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; operation on x-graphics-device: <b>resize-window</b><var> width height<a name="index-resize_002dwindow-on-x_002dgraphics_002ddevice-3071"></a></var><br>
<blockquote><p>Changes the size of a window.  <var>Width</var> and <var>height</var> must be
exact non-negative integers.  The operation corresponds directly to
Xlib's <code>XResizeWindow</code>.

        <p>This operation resets the virtual coordinate system and the clip
rectangle. 
</p></blockquote></div>

<div class="defun">
&mdash; operation on x-graphics-device: <b>move-window</b><var> x y<a name="index-move_002dwindow-on-x_002dgraphics_002ddevice-3072"></a></var><br>
<blockquote><p>Changes the position of a window on the display.  <var>X</var> and <var>y</var>
must be exact integers.  The operation corresponds directly to Xlib's
<code>XMoveWindow</code>.  Note that the coordinates <var>x</var> and <var>y</var> do
not take the external border into account, and therefore will not
position the window as you might like.  The only reliable way to
position a window is to ask a window manager to do it for you. 
</p></blockquote></div>

<div class="defun">
&mdash; operation on x-graphics-device: <b>get-default</b><var> resource property<a name="index-get_002ddefault-on-x_002dgraphics_002ddevice-3073"></a></var><br>
<blockquote><p>This operation corresponds directly to Xlib's <code>XGetDefault</code>. 
<var>Resource</var> and <var>property</var> must be strings.  The operation
returns the character string corresponding to the association of
<var>resource</var> and <var>property</var>; if no such association exists,
<code>#f</code> is returned. 
</p></blockquote></div>

<div class="defun">
&mdash; operation on x-graphics-device: <b>copy-area</b><var> source-x-left source-y-top width height destination-x-left destination-y-top<a name="index-copy_002darea-on-x_002dgraphics_002ddevice-3074"></a></var><br>
<blockquote><p>This operation copies the contents of the rectangle specified by
<var>source-x-left</var>, <var>source-y-top</var>, <var>width</var>, and <var>height</var> to
the rectangle of the same dimensions at <var>destination-x-left</var> and
<var>destination-y-top</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; operation on x-graphics-device: <b>font-structure</b><var> font-name<a name="index-font_002dstructure-on-x_002dgraphics_002ddevice-3075"></a></var><br>
<blockquote><p>Returns a Scheme equivalent of the X font structure for the font named
<var>font-name</var>.  If the string <var>font-name</var> does not name a font
known to the X server, or names a 16-bit font, <code>#f</code> is returned. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>x-font-structure/name</b><var> font-structure<a name="index-x_002dfont_002dstructure_002fname-3076"></a></var><br>
&mdash; procedure: <b>x-font-structure/direction</b><var> font-structure<a name="index-x_002dfont_002dstructure_002fdirection-3077"></a></var><br>
&mdash; procedure: <b>x-font-structure/all-chars-exist</b><var> font-structure<a name="index-x_002dfont_002dstructure_002fall_002dchars_002dexist-3078"></a></var><br>
&mdash; procedure: <b>x-font-structure/default-char</b><var> font-structure<a name="index-x_002dfont_002dstructure_002fdefault_002dchar-3079"></a></var><br>
&mdash; procedure: <b>x-font-structure/min-bounds</b><var> font-structure<a name="index-x_002dfont_002dstructure_002fmin_002dbounds-3080"></a></var><br>
&mdash; procedure: <b>x-font-structure/max-bounds</b><var> font-structure<a name="index-x_002dfont_002dstructure_002fmax_002dbounds-3081"></a></var><br>
&mdash; procedure: <b>x-font-structure/start-index</b><var> font-structure<a name="index-x_002dfont_002dstructure_002fstart_002dindex-3082"></a></var><br>
&mdash; procedure: <b>x-font-structure/character-bounds</b><var> font-structure<a name="index-x_002dfont_002dstructure_002fcharacter_002dbounds-3083"></a></var><br>
&mdash; procedure: <b>x-font-structure/max-ascent</b><var> font-structure<a name="index-x_002dfont_002dstructure_002fmax_002dascent-3084"></a></var><br>
&mdash; procedure: <b>x-font-structure/max-descent</b><var> font-structure<a name="index-x_002dfont_002dstructure_002fmax_002ddescent-3085"></a></var><br>
<blockquote><p>These procedures extract the components of the font description
structure returned by the X graphics operation <code>font-structure</code>.  A
more complete description of these components appears in documentation
of the <code>XLoadQueryFont</code> Xlib call.  <code>start-index</code> is the index
of the first character available in the font.  The <code>min-bounds</code> and
<code>max-bounds</code> components are structures of type
<code>x-character-bounds</code>, and the <code>character-bounds</code> component is
a vector of the same type. 
</p></blockquote></div>

<div class="defun">
&mdash; procedure: <b>x-character-bounds/lbearing</b><var> character-bounds<a name="index-x_002dcharacter_002dbounds_002flbearing-3086"></a></var><br>
&mdash; procedure: <b>x-character-bounds/rbearing</b><var> character-bounds<a name="index-x_002dcharacter_002dbounds_002frbearing-3087"></a></var><br>
&mdash; procedure: <b>x-character-bounds/width</b><var> character-bounds<a name="index-x_002dcharacter_002dbounds_002fwidth-3088"></a></var><br>
&mdash; procedure: <b>x-character-bounds/ascent</b><var> character-bounds<a name="index-x_002dcharacter_002dbounds_002fascent-3089"></a></var><br>
&mdash; procedure: <b>x-character-bounds/descent</b><var> character-bounds<a name="index-x_002dcharacter_002dbounds_002fdescent-3090"></a></var><br>
<blockquote><p>These procedures extract components of objects of type
<code>x-character-bounds</code>.  A more complete description of them appears
in documentation of the<br> <code>XLoadQueryFont</code> Xlib call. 
</p></blockquote></div>

   </body></html>

