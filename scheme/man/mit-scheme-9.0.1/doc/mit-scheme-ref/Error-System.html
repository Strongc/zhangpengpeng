<html lang="en">
<head>
<title>Error System - MIT/GNU Scheme 9.0.1</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="MIT/GNU Scheme 9.0.1">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="prev" href="Operating_002dSystem-Interface.html#Operating_002dSystem-Interface" title="Operating-System Interface">
<link rel="next" href="Graphics.html#Graphics" title="Graphics">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual documents MIT/GNU Scheme 9.0.1.

Copyright (C) 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993,
    1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,
    2005, 2006, 2007, 2008, 2009, 2010 Massachusetts Institute of
    Technology

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover Texts
     being ``A GNU Manual,'' and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License.''

     (a) The FSF's Back-Cover Text is: ``You have freedom to copy and
     modify this GNU Manual, like GNU software.  Copies published by
     the Free Software Foundation raise funds for GNU development.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Error-System"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Graphics.html#Graphics">Graphics</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Operating_002dSystem-Interface.html#Operating_002dSystem-Interface">Operating-System Interface</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="index.html#Top">Top</a>
<hr>
</div>

<h2 class="chapter">16 Error System</h2>

<p><a name="index-error-2758"></a>The MIT/GNU Scheme error system provides a uniform mechanism for the
signalling of errors and other exceptional conditions.  The simplest and
most generally useful procedures in the error system are:

     <dl>
<dt><code>error</code><dd>is used to signal simple errors, specifying a message and some irritant
objects (see <a href="Condition-Signalling.html#Condition-Signalling">Condition Signalling</a>).  Errors are usually handled by
stopping the computation and putting the user in an error <span class="sc">repl</span>.

     <br><dt><code>warn</code><dd>is used to signal warnings (see <a href="Condition-Signalling.html#Condition-Signalling">Condition Signalling</a>).  Warnings are
usually handled by printing a message on the console and continuing the
computation normally.

     <br><dt><code>ignore-errors</code><dd>is used to suppress the normal handling of errors within a given dynamic
extent (see <a href="Condition-Handling.html#Condition-Handling">Condition Handling</a>).  Any error that occurs within the
extent is trapped, returning immediately to the caller of
<code>ignore-errors</code>. 
</dl>

   <p>More demanding applications require more powerful facilities.  To give a
concrete example, suppose you want floating-point division to return a very
large number whenever the denominator is zero.  This behavior can be
implemented using the error system.

   <p>The Scheme arithmetic system can signal many different kinds of errors,
including floating-point divide by zero.  In our example, we would like to
handle this particular condition specially, allowing the system to handle
other arithmetic errors in its usual way.

   <p>The error system supports this kind of application by providing
mechanisms for distinguishing different types of error conditions and
for specifying where control should be transferred should a given
condition arise.  In this example, there is a specific object that
represents the &ldquo;floating-point divide by zero&rdquo; condition type, and it
is possible to dynamically specify an arbitrary Scheme procedure to be
executed when a condition of that type is signalled.  This procedure
then finds the stack frame containing the call to the division operator,
and returns the appropriate value from that frame.

   <p>Another useful kind of behavior is the ability to specify uniform
handling for related classes of conditions.  For example, it might be
desirable, when opening a file for input, to gracefully handle a variety of
different conditions associated with the file system.  One such condition
might be that the file does not exist, in which case the program will try
some other action, perhaps opening a different file instead.  Another
related condition is that the file exists, but is read protected, so it
cannot be opened for input.  If these or any other related conditions
occur, the program would like to skip this operation and move on to
something else.

   <p>At the same time, errors unrelated to the file system should be treated in
their usual way.  For example, calling <code>car</code> on the argument <code>3</code>
should signal an error.  Or perhaps the name given for the file is
syntactically incorrect, a condition that probably wants to be handled
differently from the case of the file not existing.

   <p><a name="index-taxonomical-link_002c-of-condition-type-_0028defn_0029-2759"></a><a name="index-specialization_002c-of-condition-types-_0028defn_0029-2760"></a><a name="index-generalization_002c-of-condition-types-_0028defn_0029-2761"></a>To facilitate the handling of classes of conditions, the error system
taxonomically organizes all condition types.  The types are related to one
another by <dfn>taxonomical links</dfn>, which specify that one type is a &ldquo;kind
of&rdquo; another type.  If two types are linked this way, one is considered to
be a <dfn>specialization</dfn> of the other; or vice-versa, the second is a
<dfn>generalization</dfn> of the first.  In our example, all of the errors
associated with opening an input file would be specializations of the
condition type &ldquo;cannot open input file&rdquo;.

   <p><a name="index-condition_002dtype_003asimple_002dcondition-2762"></a><a name="index-condition_002dtype_003awarning-2763"></a><a name="index-condition_002dtype_003abreakpoint-2764"></a><a name="index-condition_002dtype_003aserious_002dcondition-2765"></a>The taxonomy of condition types permits any condition type to have no
more than one immediate generalization.  Thus, the condition types form
a forest (set of trees).  While users can create new trees, the standard
taxonomy (see <a href="Taxonomy.html#Taxonomy">Taxonomy</a>) is rooted at
<code>condition-type:serious-condition</code>, <code>condition-type:warning</code>,
<code>condition-type:simple-condition</code>, and
<code>condition-type:breakpoint</code>; users are encouraged to add new
subtypes to these condition types rather than create new trees in the
forest.

   <p>To summarize, the error system provides facilities for the following tasks. 
The sections that follow will describe these facilities in more
detail.

     <dl>
<dt>Signalling a condition<dd><a name="index-signal_002dcondition-2766"></a>A condition may be signalled in a number of different ways.  Simple
errors may be signalled, without explicitly defining a condition type,
using <code>error</code>.  The <code>signal-condition</code> procedure provides the
most general signalling mechanism.

     <br><dt>Handling a condition<dd><a name="index-bind_002dcondition_002dhandler-2767"></a>The programmer can dynamically specify handlers for particular condition
types or for classes of condition types, by means of the
<code>bind-condition-handler</code> procedure.  Individual handlers have
complete control over the handling of a condition, and additionally may
decide not to handle a particular condition, passing it on to previously
bound handlers.

     <br><dt>Restarting from a handler<dd><a name="index-with_002drestart-2768"></a>The <code>with-restart</code> procedure provides a means for
condition-signalling code to communicate to condition-handling code what
must be done to proceed past the condition.  Handlers can examine the
restarts in effect when a condition was signalled, allowing a structured
way to continue an interrupted computation.

     <br><dt>Packaging condition state<dd>Each condition is represented by an explicit object.  Condition objects
contain information about the nature of the condition, information that
describes the state of the computation from which the condition arose,
and information about the ways the computation can be restarted.

     <br><dt>Classification of conditions<dd><a name="index-condition-type-2769"></a><a name="index-type_002c-condition-2770"></a><a name="index-specialization_002c-of-condition-types-2771"></a><a name="index-generalization_002c-of-condition-types-2772"></a>Each condition has a type, represented by a condition type object.  Each
condition type may be a specialization of some other condition types.  A
group of types that share a common generalization can be handled
uniformly by specifying a handler for the generalization. 
</dl>

<ul class="menu">
<li><a accesskey="1" href="Condition-Signalling.html#Condition-Signalling">Condition Signalling</a>
<li><a accesskey="2" href="Error-Messages.html#Error-Messages">Error Messages</a>
<li><a accesskey="3" href="Condition-Handling.html#Condition-Handling">Condition Handling</a>
<li><a accesskey="4" href="Restarts.html#Restarts">Restarts</a>
<li><a accesskey="5" href="Condition-Instances.html#Condition-Instances">Condition Instances</a>
<li><a accesskey="6" href="Condition-Types.html#Condition-Types">Condition Types</a>
<li><a accesskey="7" href="Taxonomy.html#Taxonomy">Taxonomy</a>
</ul>

   </body></html>

